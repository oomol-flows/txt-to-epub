nodes:
  - node_id: map#1
    title: "%map-1%"
    inputs_from:
      - handle: array
        from_node:
          - node_id: filter_files#1
            output_handle: files
    subflow: array::map
    slots:
      - slot_node_id: +slot#2
        slotflow: self::+slotflow#1
        inputs_def:
          - handle: epub_dir
            json_schema:
              type: string
              ui:widget: dir
            nullable: false
            executor_name: python
          - handle: book_title
            json_schema:
              type: string
            nullable: true
            executor_name: python
          - handle: author
            json_schema:
              type: string
            nullable: true
            executor_name: python
          - handle: cover_image
            json_schema:
              type: string
              ui:widget: file
            nullable: true
            executor_name: python
        inputs_from:
          - handle: book_title
            from_flow:
              - input_handle: book_title
          - handle: author
            from_flow:
              - input_handle: author
          - handle: cover_image
            from_flow:
              - input_handle: cover_image
          - handle: epub_dir
            from_flow:
              - input_handle: epub_dir
  - node_id: list_files_from_folder#1
    title: "%list-files-from-folder-1%"
    inputs_from:
      - handle: folder
        from_flow:
          - input_handle: folder
      - handle: sort
        value: false
      - handle: traverse
        value: false
      - handle: absolute_path
        value: true
    task: oomol-file::list_files_from_folder
  - node_id: filter_files#1
    title: "%filter-files-1%"
    inputs_from:
      - handle: files
        from_node:
          - node_id: list_files_from_folder#1
            output_handle: file_paths
      - handle: type
        value: null
      - handle: filt_hide
        value: true
    task: oomol-file::filter_files
description: "%batch-converts-all-txt-files-in-a-folder-to-epub-format-with-opt%"
inputs_def:
  - handle: folder
    description: "%folder-containing-txt-files-to-convert%"
    json_schema:
      type: string
      ui:widget: dir
    nullable: false
    executor_name: nodejs
  - handle: epub_dir
    description: "%output-directory-for-generated-epub-files%"
    json_schema:
      type: string
      ui:widget: dir
    nullable: false
    executor_name: python
  - handle: book_title
    description: "%book-title-optional-auto-detected-per-file%"
    json_schema:
      type: string
    value:
    nullable: true
    executor_name: python
  - handle: author
    description: "%author-name-optional-auto-detected-per-file%"
    json_schema:
      type: string
    value:
    nullable: true
    executor_name: python
  - handle: cover_image
    description: "%cover-image-optional-auto-downloaded-per-file%"
    json_schema:
      type: string
      ui:widget: file
    value:
    nullable: true
    executor_name: python
outputs_def:
  - handle: array
    description: "%array-of-generated-epub-file-paths%"
    json_schema:
      type: array
    nullable: false
outputs_from:
  - handle: array
    from_node:
      - node_id: map#1
        output_handle: array
title: "%txts-to-epubs%"
icon: ":twemoji:books:"
