inputs_def:
  - handle: txt_file
    description: Input
    json_schema:
      type: string
      ui:widget: file
  - handle: epub_dir
    json_schema:
      type: string
      ui:widget: dir
  - handle: book_title
    json_schema:
      type: string
    value:
    nullable: true
  - handle: author
    json_schema:
      type: string
    value:
    nullable: true
  - handle: cover_image
    json_schema:
      type: string
      ui:widget: file
    value:
    nullable: true
  - group: Smart TOC Analysis
    collapsed: true
  - handle: enable_smart_toc
    description: Enable LLM-powered smart table of contents analysis
    json_schema:
      type: boolean
    value: false
    nullable: false
  - handle: llm_confidence_threshold
    description: Confidence threshold for using LLM (0.0-1.0). Lower values trigger
      LLM more often. Set to 0 to always use LLM.
    json_schema:
      type: number
      minimum: 0
      maximum: 1
    value: 0.7
    nullable: false
  - handle: llm_toc_detection_threshold
    description: LLM confidence threshold for detecting TOC (0.0-1.0). LLM must
      exceed this confidence to confirm a TOC exists.
    json_schema:
      type: number
      minimum: 0
      maximum: 1
    value: 0.7
    nullable: false
  - handle: llm_no_toc_threshold
    description: LLM confidence threshold for confirming NO TOC (0.0-1.0). If LLM
      confidence exceeds this when saying no TOC, skip TOC removal.
    json_schema:
      type: number
      minimum: 0
      maximum: 1
    value: 0.8
    nullable: false
  - handle: toc_detection_score_threshold
    description: Minimum score threshold for TOC detection (0-100). Higher values
      require stronger evidence of a table of contents.
    json_schema:
      type: number
      minimum: 0
      maximum: 100
    value: 30
    nullable: false
  - handle: toc_max_scan_lines
    description: Maximum number of lines to scan for TOC detection (safety limit)
    json_schema:
      type: integer
      minimum: 50
      maximum: 1000
    value: 300
    nullable: false
  - handle: llm
    json_schema:
      ui:options:
        title: Model
      ui:widget: llm::model
    value:
      model: oomol-chat
      temperature: 0
      top_p: 0.5
      max_tokens: 128000
outputs_def:
  - handle: epub_file
    description: Output
    json_schema:
      type: string
      ui:widget: file
ui:
  default_width: 450
executor:
  name: python
  options:
    spawn: false
    entry: __init__.py
title: Txt To Epub Core
icon: ":twemoji:blue-book:"
applet: true
description: This module converts txt book files to epub format. Input a txt
  file path and a storage path for the converted file. Returns an epub file to
  the user. Book title, author, and cover are optional.
private: true
